(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{293:function(e,t,a){e.exports=a(532)},298:function(e,t,a){},424:function(e,t){},426:function(e,t){},464:function(e,t){},465:function(e,t){},532:function(e,t,a){"use strict";a.r(t);var n=a(55),r=a.n(n),o=a(62),l=a(0),c=a.n(l),i=(a(298),a(552)),m=a(548),s=a(280),u=a(26),d=a(33),p=a(59),E=a(60),b=a.n(E);function f(){var e=Object(p.a)(["\n  mutation createComment($postId: ID!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      id\n      body\n      userName\n      createdAt\n      likeCount\n      commentCount\n      likes {\n        id\n        userName\n      }\n      comments {\n        id\n        body\n        userName\n        createdAt\n      }\n    }\n  }\n"]);return f=function(){return e},e}function g(){var e=Object(p.a)(["\n  mutation likePost($postId: ID!) {\n    likePost(postId: $postId) {\n      id\n      likes {\n        id\n        userName\n      }\n      likeCount\n    }\n  }\n"]);return g=function(){return e},e}function O(){var e=Object(p.a)(["\n  query getPost($postId: ID!) {\n    getPost(postId: $postId) {\n      id\n      body\n      userName\n      createdAt\n      comments {\n        id\n        body\n        userName\n        createdAt\n      }\n      likeCount\n      commentCount\n      likes {\n        id\n        userName\n      }\n    }\n  }\n"]);return O=function(){return e},e}function y(){var e=Object(p.a)(["\n  mutation createPost($body: String!) {\n    createPost(body: $body) {\n      id\n      body\n      userName\n      createdAt\n      likeCount\n      commentCount\n      likes {\n        id\n        userName\n      }\n    }\n  }\n"]);return y=function(){return e},e}function v(){var e=Object(p.a)(["\n  {\n    getPosts {\n      id\n      body\n      userName\n      createdAt\n      likeCount\n      commentCount\n      likes {\n        id\n        userName\n      }\n    }\n  }\n"]);return v=function(){return e},e}var h=b()(v()),j=b()(y()),w=b()(O()),P=b()(g()),S=b()(f()),I=a(550),N=a(65),k=a(135),C=a(34),x=a(48),D=function(e){var t=e.likeCount,a=e.id,n=e.likes,r=Object(x.c)(function(e){return e.userData}),o=Object(l.useState)(!1),i=Object(u.a)(o,2),m=i[0],s=i[1];Object(l.useEffect)(function(){r&&n.find(function(e){return e.userName===r.userName})?s(!0):s(!1)},[r,n]);var p=Object(d.a)(P,{variables:{postId:a}}),E=Object(u.a)(p,1)[0],b=function(e){E(a)},f=r?m?c.a.createElement(I.a,{color:"red",onClick:b},c.a.createElement(N.a,{name:"like"}),"Like"):c.a.createElement(I.a,{color:"red",basic:!0,onClick:b},c.a.createElement(N.a,{name:"like"}),"Like"):c.a.createElement(I.a,{color:"red",as:C.b,basic:!0,to:"/login"},c.a.createElement(N.a,{name:"like"}),"Like");return c.a.createElement(I.a,{as:"div",labelPosition:"right"},f,c.a.createElement(k.a,{basic:!0,color:"red",pointing:"left"},t))},A=function(e){var t=e.data,a=t.id,n=t.likeCount,r=t.commentCount,o=t.userName,l=t.likes;return c.a.createElement("div",null,c.a.createElement(I.a.Group,{fluid:!0,style:{maxWidth:"80%",margin:"auto",display:"flex"}},c.a.createElement(D,{likeCount:n,id:a,userName:o,likes:l}),c.a.createElement(I.a,{labelPosition:"right",as:C.b,to:"/post/".concat(a)},c.a.createElement(I.a,{basic:!0,color:"blue"},c.a.createElement(N.a,{name:"comments"}),"Comment"),c.a.createElement(k.a,{basic:!0,color:"blue",pointing:"left"},r))))},q=a(133),L=a.n(q),$=function(e){var t=e.data,a=t.body,n=t.userName,r=t.createdAt;return c.a.createElement(i.a.Row,null,c.a.createElement(m.a,{fluid:!0,style:{width:"100%",marginBottom:"1rem"}},c.a.createElement(m.a.Content,null,c.a.createElement(s.a,{floated:"left",avatar:!0,size:"massive",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1wJ90xBHS5VQEdYGHqdyZKpfbCnU2sl_5jFxSlJtOuodsCoVo"}),c.a.createElement(m.a.Header,null,"John Doe"),c.a.createElement(m.a.Meta,null,"@",n),c.a.createElement(m.a.Meta,null,L()(r).fromNow()),c.a.createElement(m.a.Description,{style:{fontSize:"1.18rem"}},a)),c.a.createElement(m.a.Content,{extra:!0},c.a.createElement(A,{data:e.data})),e.children))},_=a(547),G=function(){return c.a.createElement("div",null,c.a.createElement(m.a,null,c.a.createElement(m.a.Content,null,c.a.createElement(m.a.Header,{textAlign:"center"},c.a.createElement(s.a,{as:C.b,to:"/profile",style:{padding:"1rem"},size:"small",circular:!0,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1wJ90xBHS5VQEdYGHqdyZKpfbCnU2sl_5jFxSlJtOuodsCoVo"})),c.a.createElement(m.a.Header,{textAlign:"center"},"John Doe"),c.a.createElement(m.a.Meta,{textAlign:"center"},c.a.createElement("span",null,"@username")),c.a.createElement(m.a.Description,null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.")),c.a.createElement(m.a.Content,{extra:!0},c.a.createElement(_.a,null,c.a.createElement(_.a.Item,{icon:"marker",content:"Miami, FL"}),c.a.createElement(_.a.Item,{icon:"mail",content:c.a.createElement("a",{href:"mailto:test@test.com"},"johnDoe@test.com")})))))},U=a(282),Q=a(553),B=a(545),J=function(){var e=Object(l.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)(""),o=Object(u.a)(r,2),i=o[0],m=o[1],s=Object(d.a)(j,{variables:{body:a},onError:function(e){m(e.graphQLErrors[0].message)},update:function(e,t){var a=t.data.createPost;try{var n=e.readQuery({query:h});n.getPosts=[a].concat(Object(U.a)(n.getPosts)),e.writeQuery({query:h,data:n})}catch(r){m("Unable to add Post")}}}),p=Object(u.a)(s,1)[0];return c.a.createElement(Q.a,{style:{marginBottom:"1rem"}},c.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),p(),n("")}},c.a.createElement(B.a.TextArea,{label:"Create Post",placeholder:"Post...",rows:2,value:a,onChange:function(e){return n(e.target.value)},error:i||!1}),c.a.createElement(I.a,{style:{backgroundColor:"#4d9dd9",color:"white"},name:"body"}," ","Add Post")))},R=function(){var e=Object(x.c)(function(e){return e.userData}),t=Object(d.b)(h),a=t.loading,n=t.data.getPosts;return c.a.createElement("div",null,c.a.createElement(i.a,{centered:!0,className:a?"loading":""},c.a.createElement(i.a.Row,null,c.a.createElement(i.a.Column,{only:"computer",computer:5},c.a.createElement(G,null)),c.a.createElement(i.a.Column,{mobile:16,tablet:12,computer:7},c.a.createElement(i.a.Row,null,e&&c.a.createElement(J,null)),n&&n.map(function(e){return c.a.createElement($,{data:e,key:e.id})})))))},T=a(543),V=a(549);function H(){var e=Object(p.a)(["\n  mutation register(\n    $userName: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        userName: $userName\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      id\n      token\n      userName\n      email\n    }\n  }\n"]);return H=function(){return e},e}function z(){var e=Object(p.a)(["\n  mutation login($userName: String!, $password: String!) {\n    login(userName: $userName, password: $password) {\n      id\n      token\n      userName\n      email\n    }\n  }\n"]);return z=function(){return e},e}var M=b()(z()),F=b()(H());function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var K=function(e){var t=Object(l.useState)({}),a=Object(u.a)(t,2),n=a[0],r=a[1],i=Object(l.useState)({userName:"",email:"",password:"",confirmPassword:""}),m=Object(u.a)(i,2),s=m[0],p=m[1],E=Object(d.a)(F,{update:function(t,a){console.log(a,"result"),localStorage.setItem("token",a.data.login.token),e.history.push("/")},variables:s,onError:function(e){e.graphQLErrors[0].extensions.exception.errors&&r(e.graphQLErrors[0].extensions.exception.errors)}}),b=Object(u.a)(E,2),f=b[0],g=b[1].loading,O=function(e){p(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s,Object(o.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",null,c.a.createElement(T.a,{text:!0},c.a.createElement(Q.a,null,c.a.createElement("div",{style:{textAlign:"center",padding:"1rem",fontSize:"2rem"}},c.a.createElement(N.a,{name:"user"}),"Register"),n.message?c.a.createElement(V.a,{error:!0,header:"Invalid Username",content:n.message}):null,c.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),f()},noValidate:!0,className:g?"loading":""},c.a.createElement(B.a.Group,{widths:"equal"},c.a.createElement(B.a.Input,{fluid:!0,label:"Username",name:"userName",onChange:O,value:s.userName,placeholder:"Enter Username",error:n.userName&&n.userName,required:!0}),c.a.createElement(B.a.Input,{fluid:!0,type:"email",label:"Email",name:"email",placeholder:"Email Address",onChange:O,value:s.email,error:n.email&&n.email,required:!0})),c.a.createElement(B.a.Group,{widths:"equal"},c.a.createElement(B.a.Input,{fluid:!0,type:"password",label:"Password",name:"password",placeholder:"Password",onChange:O,error:n.password&&n.password,required:!0}),c.a.createElement(B.a.Input,{fluid:!0,type:"password",name:"confirmPassword",label:"Confrim Password",placeholder:"Confirm Password",onChange:O,error:n.confirmPassword&&n.confirmPassword,required:!0})),c.a.createElement(I.a,{primary:!0,fluid:!0,style:{maxWidth:"50%",margin:"auto"},type:"submit"},"Submit")))))};function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Y=function(e){var t=Object(l.useState)({}),a=Object(u.a)(t,2),n=a[0],r=a[1],i=Object(l.useState)({userName:"",password:""}),m=Object(u.a)(i,2),s=m[0],p=m[1],E=Object(x.b)(),b=Object(d.a)(M,{update:function(t,a){var n,r=a.data.login;E((n=r,localStorage.setItem("token",n.token),{type:"LOGIN_USER",payload:n})),e.history.push("/")},variables:s,onError:function(e){e.graphQLErrors[0].extensions.exception.errors&&r(e.graphQLErrors[0].extensions.exception.errors)}}),f=Object(u.a)(b,2),g=f[0],O=f[1].loading,y=function(e){p(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s,Object(o.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{style:{maxWidth:"600px",margin:"0 auto"}},c.a.createElement(Q.a,null,c.a.createElement("div",{style:{textAlign:"center",padding:"1rem",fontSize:"2rem"}},c.a.createElement(N.a,{name:"user"}),"Login"),n.message?c.a.createElement(V.a,{error:!0,header:"Error",content:n.message}):null,c.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),g()},className:O?"loading":"",noValidate:!0},c.a.createElement(B.a.Input,{fluid:!0,name:"userName",label:"Username",placeholder:"Enter Username",onChange:y,error:n.userName&&n.userName,required:!0}),c.a.createElement(B.a.Input,{fluid:!0,type:"password",name:"password",label:"Password",placeholder:"Password",error:n.password&&n.password,onChange:y,required:!0}),c.a.createElement(I.a,{primary:!0,fluid:!0,style:{maxWidth:"50%",margin:"auto"},type:"submit"},"Login"))))},Z=a(546),ee=a(554),te=function(e){var t=e.id;console.log(t);var a=Object(l.useState)(""),n=Object(u.a)(a,2),r=n[0],o=n[1],i=Object(d.a)(S,{variables:{postId:t,body:r},onError:function(e){return console.log(e.graphQLErrors)}}),m=Object(u.a)(i,2),s=m[0],p=m[1].data;console.log(p);return c.a.createElement("div",null,c.a.createElement(B.a,{onSubmit:function(e){e.preventDefault(),s(),o("")}},c.a.createElement(B.a.Input,{label:"Add Comment",action:"submit",value:r,onChange:function(e){return o(e.target.value)}})))},ae=function(e){var t=e.data;return c.a.createElement("div",{style:{padding:" 1rem 2rem"}},c.a.createElement(Z.a.Group,null,c.a.createElement(ee.a,{as:"h3",dividing:!0},"Comments"),c.a.createElement(te,{id:e.postId}),t.map(function(e){return c.a.createElement(Z.a,{key:e.id},c.a.createElement(Z.a.Avatar,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQFsBGYX4aIjM3ykjPaz7Q5AQx7Kldk_rfc_EGKpWGtYyeadVSycw"}),c.a.createElement(Z.a.Content,null,c.a.createElement(Z.a.Author,{as:"span"},e.userName),c.a.createElement(Z.a.Metadata,null,c.a.createElement("div",null,L()(e.createdAt).fromNow())),c.a.createElement(Z.a.Text,null,e.body)))})))},ne=function(e){var t=Object(d.b)(w,{variables:{postId:e.match.params.id}}).data.getPost;return c.a.createElement("div",{style:{maxWidth:"600px",margin:"auto"}},t&&c.a.createElement($,{data:t},c.a.createElement(ae,{data:t.comments,postId:t.id})))},re=a(85),oe=a(277),le=a.n(oe),ce=null;if(localStorage.getItem("token")){var ie=le.a.decode(localStorage.getItem("token"));1e3*ie.exp<Date.now()?localStorage.removeItem("token"):ce=ie}var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return e=t.payload;case"LOGOUT_USER":return e=null;default:return e}},se=Object(re.b)({userData:me}),ue=a(544),de=a(542),pe=function(){return c.a.createElement("div",null,c.a.createElement(i.a,{centered:!0},c.a.createElement(i.a.Column,{width:12},c.a.createElement(Q.a,null,c.a.createElement("h4",null,"Account Details"),c.a.createElement(ue.a,null),c.a.createElement("div",{style:{display:"flex",padding:".5rem"}},c.a.createElement(s.a,{inline:!0,avatar:!0,size:"tiny",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1wJ90xBHS5VQEdYGHqdyZKpfbCnU2sl_5jFxSlJtOuodsCoVo"}),c.a.createElement("div",{style:{flexDirection:"column",alignSelf:"center",padding:".5rem 1rem"}},c.a.createElement("h3",{style:{margin:0}},"John Doe"),c.a.createElement("p",null,"change Avatar"))),c.a.createElement(ue.a,null),c.a.createElement("h4",null,"Personal Information"),c.a.createElement(B.a,null,c.a.createElement(B.a.Group,{widths:"equal"},c.a.createElement(B.a.Input,{fluid:!0,label:"First Name"}),c.a.createElement(B.a.Input,{fluid:!0,label:"Last Name"})),c.a.createElement(B.a.Group,{widths:"equal"},c.a.createElement(B.a.Input,{fluid:!0,label:"City"}),c.a.createElement(B.a.Input,{fluid:!0,label:"Email",disabled:!0})),c.a.createElement(B.a.Field,{control:de.a,label:"Bio"}),c.a.createElement(I.a,{primary:!0},"Update"))))))},Ee=a(64),be=a(551),fe=function(){var e=Object(x.c)(function(e){return e.userData}),t=Object(x.b)();return e?c.a.createElement("div",{style:{marginBottom:"2rem"}},c.a.createElement(be.a,{pointing:!0,secondary:!0},c.a.createElement(be.a.Item,{header:!0,name:"Social App",as:C.b,to:"/"}),c.a.createElement(be.a.Menu,{position:"right"},c.a.createElement(be.a.Item,{name:e.userName,as:C.b,to:"/profile/".concat(e.id)}),c.a.createElement(be.a.Item,{name:"Logout",as:C.b,to:"/",onClick:function(){t((localStorage.removeItem("token"),{type:"LOGOUT_USER"}))}})))):c.a.createElement("div",{style:{marginBottom:"2rem"}},c.a.createElement(be.a,{pointing:!0,secondary:!0},c.a.createElement(be.a.Item,{header:!0,name:"Social App",as:C.b,to:"/"}),c.a.createElement(be.a.Menu,{position:"right"},c.a.createElement(be.a.Item,{name:"Login",as:C.b,to:"/login"}),c.a.createElement(be.a.Item,{name:"Register",as:C.b,to:"/register"}))))},ge=Object(re.c)(se,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Oe=function(){return c.a.createElement(x.a,{store:ge},c.a.createElement(C.a,null,c.a.createElement(T.a,null,c.a.createElement(fe,null),c.a.createElement(Ee.c,null,c.a.createElement(Ee.a,{exact:!0,path:"/",component:R}),c.a.createElement(Ee.a,{exact:!0,path:"/register",component:K}),c.a.createElement(Ee.a,{exact:!0,path:"/login",component:Y}),c.a.createElement(Ee.a,{exact:!0,path:"/post/:id",component:ne}),c.a.createElement(Ee.a,{exact:!0,path:"/profile/",component:pe})))))},ye=a(66),ve=a(281),he=a(283),je=a(32),we=a(279);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ie=Object(he.a)({uri:"/graphql"}),Ne=Object(we.a)(function(e,t){var a=t.headers,n=localStorage.getItem("token");return{headers:Se({},a,{Authorization:n?"Bearer ".concat(n):""})}}),ke=new ye.c({link:Ne.concat(Ie),cache:new ve.a}),Ce=c.a.createElement(je.a,{client:ke},c.a.createElement(Oe,null));r.a.render(Ce,document.getElementById("root"))}},[[293,1,2]]]);
//# sourceMappingURL=main.dec5514f.chunk.js.map